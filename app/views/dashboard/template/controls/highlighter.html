<style>
[name="{{key}}-filter"],
[name="{{key}}-toggle"] {
  display: none;
}

form.syntax-highlighter.select {
  display: block;
  padding: 0;
  border-bottom: 1px solid var(--light-border-color);
}

form.syntax-highlighter.select::before {
  display: none;
}

label[for="{{key}}-toggle"] {
  padding: 0.5rem 16px;
  cursor: pointer;
  border-bottom: 1px solid var(--light-border-color);
  display: block;
  margin: 0;
  user-select: none;
  position: relative;
}

label[for="{{key}}-toggle"]::after {
  content: "";
  width: 1em;
  height: 1em;
  position: absolute;
  top: 50%;
  margin-top: -0.5em;
  right: 12px;
  opacity: 0.3;
  transform: rotate(90deg);
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path d='m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z'/></svg>");
  background-size: 1em;
}

label[for="{{key}}-toggle"]:hover {
  background: var(--light-background-color);
}

label[for="{{key}}-toggle"]:hover::after {
  opacity: 0.7;
}

form.syntax-highlighter .options {
  display: none;
  width: 100%;
  box-sizing: border-box;
  background: #fafafa;
}

input[name="{{key}}-toggle"]:checked + .options {
  display: block;
}

.options .filters {
  font-size: 12px;
  padding: 0.3em 0.5em;
  border-bottom: 1px solid var(--light-border-color);
}

.options .filters label {
  border-radius: 10px;
  padding: 0.15em 0.5em;
  cursor: pointer;
  color: #666;
}

[id="{{key}}-show-all"]:checked ~ .options label[for="{{key}}-show-all"],
[id="{{key}}-show-light"]:checked ~ .options label[for="{{key}}-show-light"],
[id="{{key}}-show-dark"]:checked ~ .options label[for="{{key}}-show-dark"] {
  background: #e0e0e0;
}

[id="{{key}}-show-dark"]:checked ~ .options button:not([data-tag="dark"]),
[id="{{key}}-show-light"]:checked ~ .options button:not([data-tag="light"]) {
  display: none;
}

.options .list {
  max-height: 340px;
  overflow-y: auto;
}

.options button {
  width: 100%;
  box-sizing: border-box;
  text-align: left;
  margin: 0;
  border-radius: 0;
  border: none;
  outline: none;
  border-top: 1px solid var(--light-border-color);
  padding: 0.5rem 0.75rem;
  display: block;
  cursor: pointer;
  transition: opacity 120ms ease;
}

.options button:hover {
  opacity: 0.92;
}

.options button:active {
  opacity: 0.82;
}
</style>

<div class="settings-group">
<h2 class="template-heading">{{label}}</h2>
<form method="post" class="syntax-highlighter select">
  <input type="hidden" name="_csrf" value="{{csrftoken}}" />
  <label for="{{key}}-toggle" style="border-bottom: none;">
    {{#value}}
      {{#name}}
      <span style="font-family: {{stack}};">{{name}}</span>
      <span style="background:{{background}};color:{{color}};border-radius:var(--border-radius);padding: 0 4px;margin-left: 4px;">
      {{#colors}}<span style="color:{{color}}">&bull;</span>{{/colors}}
      </span>
      {{/name}}
      {{^name}}
      Select a color scheme
      {{/name}}
    {{/value}}
  </label>

  <input name="{{key}}-filter" type="radio" id="{{key}}-show-all" checked>
  <input name="{{key}}-filter" type="radio" id="{{key}}-show-light">
  <input name="{{key}}-filter" type="radio" id="{{key}}-show-dark">

  <input name="{{key}}-toggle" type="checkbox" id="{{key}}-toggle">

  <div class="options" style="margin:0;border:none">
    <div class="filters" style="margin-top:0;">
      <label for="{{key}}-show-all">All</label>
      <label for="{{key}}-show-light">Light</label>
      <label for="{{key}}-show-dark">Dark</label>
    </div>
    <div class="list">
    {{#options}}
    <button
      type="submit"
      {{#tags}}
      data-tag="{{tag}}"
      {{/tags}}
      name="locals.{{key}}.id"
      value="{{{id}}}"
      {{selected}}>
      {{{name}}}
      <span style="background:{{background}};color:{{color}};border-radius:var(--border-radius);padding: 0 4px;margin-left: 4px;">
      {{#colors}}<span style="color:{{color}}">&bull;</span>{{/colors}}
      </span>
    </button>
    {{/options}}
    </div>
  </div>
</form>

</div>

{{#font}}
{{> font}}
{{/font}}
